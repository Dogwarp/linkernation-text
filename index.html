<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒªãƒ³ã‚«ãƒ¼ãƒã‚¤ã‚·ãƒ§ãƒ³å³èˆˆå°èª¬ãƒ†ã‚¹ãƒˆ</title>
<style>
body { font-family: "Yu Gothic", sans-serif; background:#fdf6e3; padding:20px; }
h2 { color:#b58900; }
.thread { border:1px solid #ccc; padding:10px; margin-bottom:10px; }
.comment { margin-left:20px; border-top:1px dashed #ccc; padding:5px; }
button { margin-top:5px; }
</style>
</head>
<body>

<h1>å³èˆˆå°èª¬ã‚¹ãƒ¬ãƒƒãƒ‰ï¼ˆãƒ†ã‚¹ãƒˆç‰ˆï¼‰</h1>

<div>
  <input type="text" id="newThreadTitle" placeholder="ã‚¹ãƒ¬ãƒƒãƒ‰ã‚¿ã‚¤ãƒˆãƒ«">
  <button onclick="addThread()">ã‚¹ãƒ¬ç«‹ã¦</button>
</div>

<div id="threads"></div>

<script>
// ä¿å­˜ç”¨
let threads = JSON.parse(localStorage.getItem("threads") || "[]");

// ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã§å¾©å…ƒ
function renderThreads() {
    const container = document.getElementById("threads");
    container.innerHTML = "";
    threads.forEach((thread, tIndex) => {
        const div = document.createElement("div");
        div.className = "thread";
        div.innerHTML = `<h2>${thread.title}</h2>
                         <input type="text" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆ" id="comment-${tIndex}">
                         <button onclick="addComment(${tIndex})">ã‚³ãƒ¡ãƒ³ãƒˆ</button>`;
        // ã‚³ãƒ¡ãƒ³ãƒˆè¡¨ç¤º
        thread.comments.forEach((c, cIndex) => {
            const comDiv = document.createElement("div");
            comDiv.className = "comment";
            comDiv.innerHTML = `${c.text} <button onclick="likeComment(${tIndex},${cIndex})">ğŸ‘ ${c.likes}</button>`;
            div.appendChild(comDiv);
        });
        container.appendChild(div);
    });
}

// ã‚¹ãƒ¬ç«‹ã¦
function addThread() {
    const titleInput = document.getElementById("newThreadTitle");
    const title = titleInput.value.trim();
    if(!title) return;
    threads.push({title:title, comments:[]});
    titleInput.value = "";
    saveAndRender();
}

// ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ 
function addComment(tIndex) {
    const input = document.getElementById(`comment-${tIndex}`);
    const text = input.value.trim();
    if(!text) return;
    threads[tIndex].comments.push({text:text, likes:0});
    input.value = "";
    saveAndRender();
}

// ã„ã„ã­
function likeComment(tIndex, cIndex){
    threads[tIndex].comments[cIndex].likes++;
    saveAndRender();
}

// ä¿å­˜ã¨å†æç”»
function saveAndRender(){
    localStorage.setItem("threads", JSON.stringify(threads));
    renderThreads();
}

// åˆæœŸæç”»
renderThreads();
</script>

</body>
</html>
