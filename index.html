<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒªãƒ³ã‚«ãƒ¼ãƒã‚¤ã‚·ãƒ§ãƒ³ å³èˆˆã‚¹ãƒ¬ãƒƒãƒ‰</title>
<style>
  body { font-family: "Yu Gothic", sans-serif; background-color: #fdf6e3; padding: 20px; }
  h1 { color: #b58900; }
  .thread { border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; }
  .comment { margin-left: 20px; padding: 5px; border-bottom: 1px dashed #ccc; }
  button { margin-left: 10px; }
</style>
</head>
<body>

<h1>ãƒªãƒ³ã‚«ãƒ¼ãƒã‚¤ã‚·ãƒ§ãƒ³ å³èˆˆã‚¹ãƒ¬ãƒƒãƒ‰</h1>
<div id="threads"></div>

<script>
let threads = [
  {title: "æ„šè€…ãŒæ—…ç«‹ã¤", comments: [{text:"æœ€åˆã®ä¸€æ­©", likes:0},{text:"ãƒ¯ã‚¯ãƒ¯ã‚¯æ„Ÿ", likes:0}]},
  {title: "æˆ¦è»Šã§æŒ‘ã‚€è‹±é›„", comments: [{text:"ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿ", likes:0},{text:"æˆ¦ã„ã®äºˆæ„Ÿ", likes:0}]}
];

function displayThreads() {
  const container = document.getElementById("threads");
  container.innerHTML = "";
  threads.forEach((thread, tIndex) => {
    const div = document.createElement("div");
    div.className = "thread";
    div.innerHTML = `<h2>${thread.title}</h2>
                     <input type="text" id="input-${tIndex}" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦30ç§’ä»¥å†…ã«æŠ•ç¨¿"/>
                     <button onclick="postComment(${tIndex})">æŠ•ç¨¿</button>`;
    // ã‚³ãƒ¡ãƒ³ãƒˆã‚’ã„ã„ã­é †ã«è¡¨ç¤º
    thread.comments
      .sort((a,b) => b.likes - a.likes)
      .forEach((c, cIndex) => {
        const comDiv = document.createElement("div");
        comDiv.className = "comment";
        comDiv.innerHTML = `${c.text} <button onclick="likeComment(${tIndex},${cIndex})">ğŸ‘ ${c.likes}</button>`;
        div.appendChild(comDiv);
      });
    container.appendChild(div);
  });
}

function postComment(tIndex) {
  const input = document.getElementById(`input-${tIndex}`);
  const text = input.value.trim();
  if(text) {
    threads[tIndex].comments.push({text:text, likes:0});
    input.value = "";
    displayThreads();
  }
}

function likeComment(tIndex, cIndex) {
  threads[tIndex].comments[cIndex].likes++;
  displayThreads();
}

displayThreads();
</script>

</body>
</html>
