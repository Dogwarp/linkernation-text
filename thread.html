<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>スレッド詳細 - Linkernation</title>
</head>
<body>
  <h1 id="threadTitle"></h1>
  <div id="posts"></div>
  <br>
  <textarea id="postContent" placeholder="一行書いてみよう"></textarea>
  <br>
  <button onclick="addPost()">投稿</button>
  <br><br>
  <a href="threads.html">スレッド一覧に戻る</a>

  <script>
  const params = new URLSearchParams(window.location.search);
  const id = parseInt(params.get("id"));

  let threads = JSON.parse(localStorage.getItem("threads") || "[]");
  let thread = threads.find(t => t.id === id);

  if (!thread) {
    document.body.innerHTML = "<h1>スレッドが見つかりません</h1>";
  } else {
    document.getElementById("threadTitle").textContent = thread.title;
  }

  function renderPosts() {
    const postsDiv = document.getElementById("posts");
    postsDiv.innerHTML = "";
    thread.posts.forEach((p, i) => {
      const div = document.createElement("div");
      div.textContent = `No.${i+1}: ${p}`;
      postsDiv.appendChild(div);
    });
  }
  renderPosts();

  function addPost() {
    const content = document.getElementById("postContent").value;
    if (!content) return;
    thread.posts.push(content);
    localStorage.setItem("threads", JSON.stringify(threads));
    document.getElementById("postContent").value = "";
    renderPosts();
  }
  </script>
</body>
</html>
